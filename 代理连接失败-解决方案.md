# 🔧 代理连接失败 - 解决方案

## ⚠️ 当前问题

配置代理后仍然无法连接到 GitHub，可能的原因：

1. **代理软件未运行**
2. **代理端口不正确**
3. **代理协议不匹配**（HTTP vs SOCKS5）
4. **防火墙阻止连接**

---

## 🔍 检查步骤

### 1. 检查代理软件是否运行

- **Clash**: 查看系统托盘是否有 Clash 图标
- **V2Ray**: 检查 V2Ray 是否在运行
- **Shadowsocks**: 确认 Shadowsocks 客户端已启动

### 2. 确认代理端口

#### Clash
- 打开 Clash 控制面板（通常是 http://127.0.0.1:9090）
- 查看 "端口" 设置
- 常见端口：**7890** (HTTP), **7891** (SOCKS5)

#### V2Ray
- 查看 V2Ray 配置文件
- 常见端口：**10808** (SOCKS5), **1080** (SOCKS5)

#### Shadowsocks
- 查看 Shadowsocks 客户端设置
- 常见端口：**1080** (SOCKS5)

### 3. 测试代理连接

```powershell
# 测试 HTTP 代理（端口 7890）
curl -x http://127.0.0.1:7890 https://www.google.com

# 测试 SOCKS5 代理（端口 1080）
curl --socks5 127.0.0.1:1080 https://www.google.com
```

---

## 🚀 解决方案

### 方案 1：使用正确的代理端口

根据你的代理软件，使用正确的端口：

#### Clash（HTTP 端口通常是 7890）

```powershell
git config --global http.proxy http://127.0.0.1:7890
git config --global https.proxy http://127.0.0.1:7890
git push -u origin main
```

#### Clash（SOCKS5 端口通常是 7891）

```powershell
git config --global http.proxy socks5://127.0.0.1:7891
git config --global https.proxy socks5://127.0.0.1:7891
git push -u origin main
```

#### V2Ray（SOCKS5 端口通常是 10808）

```powershell
git config --global http.proxy socks5://127.0.0.1:10808
git config --global https.proxy socks5://127.0.0.1:10808
git push -u origin main
```

### 方案 2：使用系统代理

如果系统已配置代理，Git 可以自动使用：

```powershell
# 清除 Git 代理配置，使用系统代理
git config --global --unset http.proxy
git config --global --unset https.proxy
git push -u origin main
```

### 方案 3：使用 GitHub Desktop

如果命令行代理配置困难，可以使用 GitHub Desktop：

1. 下载安装：https://desktop.github.com/
2. 打开项目目录
3. 点击 "Push origin"

### 方案 4：使用 SSH（推荐，更稳定）

SSH 连接不依赖 HTTP/HTTPS 代理：

```powershell
# 1. 更改远程 URL 为 SSH
git remote set-url origin git@github.com:119969788/poly-copy-trading.git

# 2. 推送（不需要配置代理）
git push -u origin main
```

**注意**：需要先在 GitHub 添加 SSH 密钥。

---

## 📝 快速测试命令

### 测试代理是否工作

```powershell
# 测试 HTTP 代理
curl -x http://127.0.0.1:7890 https://api.github.com

# 测试 SOCKS5 代理
curl --socks5 127.0.0.1:1080 https://api.github.com
```

如果返回 GitHub API 信息，说明代理工作正常。

---

## 🔧 常见代理端口参考

| 代理软件 | HTTP 端口 | SOCKS5 端口 |
|---------|----------|------------|
| Clash | 7890 | 7891 |
| Clash for Windows | 7890 | 7891 |
| V2Ray | - | 10808, 1080 |
| Shadowsocks | - | 1080 |
| 系统代理 | 根据系统设置 | - |

---

## ⚡ 推荐方案

如果代理配置困难，推荐使用以下方法：

### 方法 1：SSH（最稳定）

```powershell
git remote set-url origin git@github.com:119969788/poly-copy-trading.git
git push -u origin main
```

### 方法 2：GitHub Desktop（最简单）

图形界面，自动处理代理和认证。

### 方法 3：Personal Access Token

```powershell
# 推送时会提示输入用户名和 token
git push -u origin main
# 用户名：你的 GitHub 用户名
# 密码：使用 Personal Access Token
```

---

## 🆘 如果仍然失败

1. **检查网络**：确保能访问互联网
2. **检查代理**：确认代理软件正常运行
3. **尝试其他方法**：使用 SSH 或 GitHub Desktop
4. **稍后重试**：网络问题可能是暂时的

---

## 📚 相关文档

- [推送GitHub-网络问题解决](./推送GitHub-网络问题解决.md)
- [配置代理推送](./配置代理推送.md)
