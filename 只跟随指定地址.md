# 🎯 只跟随指定地址配置指南

## 📋 说明

默认情况下，如果不设置 `TARGET_ADDRESSES`，系统会跟随排行榜前 50 名。要**只跟随指定地址**，需要在 `.env` 文件中设置 `TARGET_ADDRESSES`。

---

## 🔧 配置步骤

### 在服务器上配置

```bash
# 1. 连接到服务器
ssh root@你的服务器IP

# 2. 进入项目目录
cd /root/poly-copy-trading
# 或
cd /root/projects/poly-copy-trading

# 3. 编辑 .env 文件
nano .env
```

### 在 .env 文件中添加

```env
# 必需：私钥
POLYMARKET_PRIVATE_KEY=your_private_key

# 必需：指定要跟随的地址（只跟随这些地址，不跟随排行榜）
TARGET_ADDRESSES=0x地址1,0x地址2,0x地址3

# 可选：模拟模式
DRY_RUN=true
```

**重要**：
- 必须设置 `TARGET_ADDRESSES`，否则会跟随排行榜
- 多个地址用逗号分隔，**不要有空格**
- 地址必须以 `0x` 开头

### 保存并重启

```bash
# 保存：Ctrl+O → Enter → Ctrl+X

# 重启应用
pm2 restart poly-copy-trading

# 验证配置
pm2 logs poly-copy-trading --lines 20
```

---

## 📝 配置示例

### 示例 1：跟随单个地址

```env
POLYMARKET_PRIVATE_KEY=your_private_key
TARGET_ADDRESSES=0x1234567890abcdef1234567890abcdef12345678
DRY_RUN=true
```

### 示例 2：跟随多个地址

```env
POLYMARKET_PRIVATE_KEY=your_private_key
TARGET_ADDRESSES=0x1234567890abcdef1234567890abcdef12345678,0xabcdef1234567890abcdef1234567890abcdef12,0x9876543210fedcba9876543210fedcba98765432
DRY_RUN=true
```

---

## ✅ 验证配置

启动后，日志应该显示：

```
📋 配置信息：
   模式: 🔍 模拟模式 (Dry Run)
   跟随规模: 10% (sizeScale: 0.1)
   最大单笔金额: $10 USDC
   最大滑点: 3%
   订单类型: FOK (Fill or Kill)
   最小交易金额: $5 USDC（小于此金额不跟单）
   指定地址数量: 3          ← 这里显示地址数量
   目标地址: 0x1234..., 0x5678..., 0x9abc...  ← 这里显示地址
```

**如果看到 `跟随排行榜: 前 50 名`，说明配置没有生效，需要检查 `.env` 文件。**

---

## ⚠️ 重要提示

1. **必须设置 TARGET_ADDRESSES**：
   - 如果不设置或注释掉，系统会跟随排行榜前 50 名
   - 只有设置了 `TARGET_ADDRESSES`，才会只跟随指定地址

2. **地址格式**：
   ```env
   # ✅ 正确（逗号分隔，无空格）
   TARGET_ADDRESSES=0x1234...,0x5678...,0x9abc...
   
   # ❌ 错误（有空格）
   TARGET_ADDRESSES=0x1234..., 0x5678..., 0x9abc...
   ```

3. **修改后必须重启**：
   ```bash
   pm2 restart poly-copy-trading
   ```

---

## 🔍 检查当前配置

```bash
# 查看 .env 文件中的配置
cat .env | grep TARGET_ADDRESSES

# 查看应用日志
pm2 logs poly-copy-trading --lines 30 | grep -A 10 "配置信息"
```

---

## 🔄 切换模式

### 从排行榜切换到指定地址

```bash
# 编辑 .env
nano .env

# 添加 TARGET_ADDRESSES
TARGET_ADDRESSES=0x你的地址1,0x你的地址2

# 重启
pm2 restart poly-copy-trading
```

### 从指定地址切换回排行榜

```bash
# 编辑 .env
nano .env

# 删除或注释掉 TARGET_ADDRESSES
# TARGET_ADDRESSES=...

# 重启
pm2 restart poly-copy-trading
```

---

## 📚 完整 .env 文件示例

```env
# Polymarket 私钥（必需）
POLYMARKET_PRIVATE_KEY=your_private_key_here

# 指定要跟随的钱包地址（用逗号分隔）
# 如果设置了此项，只跟随这些地址，不跟随排行榜
TARGET_ADDRESSES=0x1234567890abcdef1234567890abcdef12345678,0xabcdef1234567890abcdef1234567890abcdef12

# 是否启用模拟模式（true = 模拟，false = 实盘）
DRY_RUN=true
```

---

## ⚡ 快速命令

```bash
# 编辑 .env
nano .env

# 添加或修改
TARGET_ADDRESSES=0x地址1,0x地址2,0x地址3

# 重启
pm2 restart poly-copy-trading

# 验证
pm2 logs poly-copy-trading --lines 20
```
